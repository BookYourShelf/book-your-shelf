<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<!-- Sort orders -->
<div class="products_bar_side d-flex flex-row align-items-end justify-content-end ml-lg-auto">
    <div class="products_dropdown product_dropdown_sorting">
        <div class="isotope_sorting_text"><span>Sort</span><i
                class="fa fa-caret-down" aria-hidden="true"></i></div>
        <ul>
            <li class="item_sorting_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${'time-desc'},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Decreasing by Order Time'"
                   th:style="${sort == 'time-desc'} ? 'color:#1f5b70'">
                </a>
            </li>

            <li class="item_sorting_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${'time-asc'},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Increasing by Order Time'"
                   th:style="${sort == 'time-asc'} ? 'color:#1f5b70'">
                </a>
            </li>

            <li class="item_sorting_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${'price-desc'},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Decreasing by Total Price'"
                   th:style="${sort == 'price-desc'} ? 'color:#1f5b70'">
                </a>
            </li>

            <li class="item_sorting_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${'price-asc'},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Increasing by Total Price'"
                   th:style="${sort == 'price-asc'} ? 'color:#1f5b70'">
                </a>
            </li>

            <li class="item_sorting_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${'company-asc'},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'A - Z Shipping Company'"
                   th:style="${sort == 'company-asc'} ? 'color:#1f5b70'">
                </a>
            </li>

            <li class="item_sorting_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${'content-desc'},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Z - A Shipping Company'"
                   th:style="${sort == 'content-desc'} ? 'color:#1f5b70'">
                </a>
            </li>
        </ul>
    </div>

    <div class="products_dropdown product_dropdown_filter">
        <div class="isotope_filter_text"><span>Payment Option Filter</span><i class="fa fa-caret-down"
                                                                              aria-hidden="true"></i>
        </div>
        <ul>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${'all'},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'All'" th:style="${payOptFilter == 'all'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${'card'},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Credit Card'" th:style="${payOptFilter == 'card'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${'paypal'},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'PayPal'" th:style="${payOptFilter == 'paypal'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${'ptt'},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'via PTT'" th:style="${payOptFilter == 'ptt'} ? 'color:#1f5b70'">
                </a>
            </li>
        </ul>
    </div>

    <div class="products_dropdown product_dropdown_filter">
        <div class="isotope_filter_text"><span>Payment Status Filter</span><i class="fa fa-caret-down"
                                                                              aria-hidden="true"></i>
        </div>
        <ul>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${'all'},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'All'" th:style="${payStatFilter == 'all'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${'pending'},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Pending'" th:style="${payStatFilter == 'pending'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${'processed'},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Processed'" th:style="${payStatFilter == 'processed'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${'completed'},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Completed'" th:style="${payStatFilter == 'completed'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${'refunded'},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Refunded'" th:style="${payStatFilter == 'refunded'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${'failed'},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Failed'" th:style="${payStatFilter == 'failed'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${'expired'},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Expired'" th:style="${payStatFilter == 'expired'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${'revoked'},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Revoked'" th:style="${payStatFilter == 'revoked'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${'canceled'},
                                                        delStatFilter=${delStatFilter})}"
                   th:text="'Canceled'" th:style="${payStatFilter == 'canceled'} ? 'color:#1f5b70'">
                </a>
            </li>
        </ul>
    </div>

    <div class="products_dropdown product_dropdown_filter">
        <div class="isotope_filter_text"><span>Delivery Status Filter</span><i class="fa fa-caret-down"
                                                                               aria-hidden="true"></i>
        </div>
        <ul>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'all'})}"
                   th:text="'All'" th:style="${delStatFilter == 'all'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'info-received'})}"
                   th:text="'Information Received'" th:style="${delStatFilter == 'info-received'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'transit'})}"
                   th:text="'In Transit'" th:style="${delStatFilter == 'transit'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'out'})}"
                   th:text="'Out for Delivery'" th:style="${delStatFilter == 'out'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'failed'})}"
                   th:text="'Failed Attempt'" th:style="${delStatFilter == 'failed'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'delivered'})}"
                   th:text="'Delivered'" th:style="${delStatFilter == 'delivered'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'exception'})}"
                   th:text="'Exception'" th:style="${delStatFilter == 'exception'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'expired'})}"
                   th:text="'Expired'" th:style="${delStatFilter == 'expired'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'pending'})}"
                   th:text="'Pending'" th:style="${delStatFilter == 'pending'} ? 'color:#1f5b70'">
                </a>
            </li>
            <li class="item_filter_btn">
                <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                        size=${orderPage.size},
                                                        page=${1},
                                                        sort=${sort},
                                                        payOptFilter=${payOptFilter},
                                                        payStatFilter=${payStatFilter},
                                                        delStatFilter=${'canceled'})}"
                   th:text="'Canceled'" th:style="${delStatFilter == 'canceled'} ? 'color:#1f5b70'">
                </a>
            </li>
        </ul>
    </div>
</div>

<span th:if="${orderPage.totalPages > 0}">

<br>

<div>
    <div class="row">
        <div class="col-lg-2">
            <div class="profile-order-title">Order Time</div>
        </div>

        <div class="col-lg-2">
            <div class="profile-order-title">Total Price</div>
        </div>

        <div class="col-lg-2">
            <div class="profile-order-title">Payment Option</div>
        </div>

        <div class="col-lg-2">
            <div class="profile-order-title">Payment Status</div>
        </div>

        <div class="col-lg-2">
            <div class="profile-order-title">Shipping Company</div>
        </div>

        <div class="col-lg-2">
            <div class="profile-order-title">Delivery Status</div>
        </div>
    </div>

    <br>

    <div class="container">
        <div class="orderDetailBox">
            <tr th:each="order: ${orderPage.content}">

                <!-- Order -->
                <div class="product">
                    <a th:href="'#order-' + ${order.getOrderId()}" class="trans_200" data-toggle="collapse">
                        <div class="product_content">
                            <div class="row">
                                <div class="col-lg-2">
                                    <div class="profile-order-text">
                                        <div class="date"
                                             th:text="${#dates.format(order.getOrderDate(), 'dd-MM-yyyy')}"></div>
                                        <div class="time"
                                             th:text="${#dates.format(order.getOrderDate(), 'hh:mm')}"></div>
                                    </div>
                                </div>

                                <div class="col-lg-2">
                                    <div class="profile-order-text"
                                         th:text="'₺' + ${#numbers.formatDecimal(order.getTotalAmount(), 0, 'COMMA', 2, 'POINT')}"></div>
                                </div>

                                <div class="col-lg-2">
                                    <div class="profile-order-text"
                                         th:text="#{${'payment_option.' + order.getPaymentOption()}}"></div>
                                </div>

                                <div class="col-lg-2">
                                    <div class="profile-order-text"
                                         th:text="#{${'payment_status.' + order.getPaymentStatus()}}"></div>
                                </div>

                                <div class="col-lg-2">
                                    <div class="profile-order-text" th:text="${order.getShippingCompany()}"></div>
                                </div>

                                <div class="col-lg-2">
                                    <div class="profile-order-text"
                                         th:text="#{${'delivery_status.' + order.getDeliveryStatus()}}"></div>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>

                <div th:id="'order-' + ${order.getOrderId()}" class="collapse">
                    <div class="cart_container">
                        <div class="product profile-order-expand-box">

                            <!-- Cart Items -->
                            <div class="cart_items">
                                <ul class="cart_items_list">
                                    <!-- Cart Item -->
                                    <li class="cart_item item_list d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-lg-end justify-content-start"
                                        th:each="productId: ${order.getProductId()}">
                                        <div class="product-row d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start mr-auto">
                                            <a th:href="@{'/product/' + ${productId}}">
                                                <div>
                                                    <div class="product_image"><img
                                                            src="images/hayvan_ciftligi.jpg" alt=""
                                                            class="product_image_img"></div>
                                                </div>
                                                <div class="product_name_container">
                                                    <div class="cart-product-name">
                                                        <a th:href="@{'/product/' + ${productId}}"
                                                           th:text="${productService.get(productId).getProductName()}">
                                                        </a>
                                                    </div>

                                                    <!-- Book, E-Book, Audio Book -->
                                                    <span th:if="${productService.get(productId).getProductTypeName() == 'Book' ||
                                                                productService.get(productId).getProductTypeName() == 'E-Book' ||
                                                                productService.get(productId).getProductTypeName() == 'Audio Book'}">
                                                        <div class="cart-product-text">
                                                            <span th:each="a, iterStat : ${productService.get(productId).getAuthors()}"
                                                                  th:text="!${iterStat.last} ? ${a} + ', ': ${a}"></span>
                                                        </div>
                                                    </span>

                                                    <!-- E-Book Reader -->
                                                    <span th:if="${productService.get(productId).getProductTypeName() == 'E-Book Reader'}">
                                                        <div class="cart-product-text"
                                                             th:text="${productService.get(productId).getReaderBrand()}">
                                                        </div>
                                                    </span>

                                                    <!-- E-Book Reader Case, Book Case -->
                                                    <span th:if="${productService.get(productId).getProductTypeName() == 'E-Book Reader Case' ||
                                                                productService.get(productId).getProductTypeName() == 'Book Case'}">
                                                        <div class="cart-product-text"
                                                             th:text="${productService.get(productId).getCaseBrand()}">
                                                        </div>
                                                    </span>

                                                </div>
                                            </a>
                                        </div>

                                        <!-- TODO Price-Count-Discount -->
                                        <div class="product_total product_text"
                                             th:text="'₺' + ${#numbers.formatDecimal(productService.get(productId).getPrice(), 0, 'COMMA', 2, 'POINT')}"><span>Total: </span>₺11.99
                                        </div>

                                        <span th:if="${order.getOrderStatus() == Order.OrderStatus.PENDING}">
                                            <div style="padding-bottom: 15px">
                                                <label class="checkbox_container">
                                                    <input checked type="checkbox"
                                                           th:name="'pending-order-' + ${order.getOrderId()}"
                                                           th:id="${productId}" th:value="${productId}"
                                                           class="billing_checkbox">
                                                    <span class="checkbox_mark"></span>
                                                </label>
                                            </div>
                                        </span>
                                    </li>
                                </ul>
                                <span th:if="${order.getOrderStatus() == Order.OrderStatus.PENDING}">
                                    <br>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="login_button trans_200">
                                                <input type="submit" value="Confirm sale"
                                                       class="confirm login_button trans_200"
                                                       th:id="'confirm-' + ${order.getOrderId()}">
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="login_button trans_200">
                                                <input type="submit" value="Cancel sale"
                                                       class="cancel login_button trans_200"
                                                       th:id="'cancel-' + ${order.getOrderId()}">
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </tr>
        </div>
    </div>
</div>

<div class="row page_nav_row">
    <div class="col">
        <div class="page_nav">
            <ul class="d-flex flex-row align-items-start justify-content-center">
                <!-- Previous button -->
                <li th:style="${currentPage == 1} ? 'display:none'">
                    <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                            size=${orderPage.size},
                                                            page=${currentPage - 1},
                                                            payOptFilter=${payOptFilter},
                                                            payStatFilter=${payStatFilter},
                                                            delStatFilter=${delStatFilter})}"
                       aria-label="Previous" title="Previous Page"
                       rel="tooltip">
                        <i class="pagination_arrow fa fa-angle-left"></i>
                    </a>
                </li>

                <!-- First page -->
                <li th:if="${orderPage.totalPages > 0}"
                    th:class="${currentPage == 1} ? 'active'">
                    <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                            size=${orderPage.size},
                                                            page=${1},
                                                            payOptFilter=${payOptFilter},
                                                            payStatFilter=${payStatFilter},
                                                            delStatFilter=${delStatFilter})}"
                       th:title="${'Page '+ 1}"
                       th:text="${1}" style="color: #fbaa1d;">
                    </a>
                </li>

                <li th:if="${currentPage - 3 > 1}" class="pagination_dots">...</li>

                <!-- Pages -->
                <li th:if="${orderPage.totalPages > 2}"
                    th:each="i : ${#numbers.sequence(currentPage - 2 > 1 ? currentPage - 2 : 2
                                    , orderPage.totalPages > 2 + currentPage ? currentPage + 2 : orderPage.totalPages - 1, 1)}"
                    th:class="${currentPage == i} ? 'active'">
                    <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                            size=${orderPage.size},
                                                            page=${i},
                                                            payOptFilter=${payOptFilter},
                                                            payStatFilter=${payStatFilter},
                                                            delStatFilter=${delStatFilter})}"
                       th:text="${i}" th:title="${'Page '+ i}"
                       style="color: #fbaa1d;"></a>
                </li>

                <li th:if="${currentPage + 3 < orderPage.totalPages}"
                    class="pagination_dots">...
                </li>

                <!-- Last page -->
                <li th:if="${orderPage.totalPages > 1}"
                    th:class="${currentPage == orderPage.totalPages} ? 'active'">
                    <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                            size=${orderPage.size},
                                                            page=${orderPage.totalPages},
                                                            payOptFilter=${payOptFilter},
                                                            payStatFilter=${payStatFilter},
                                                            delStatFilter=${delStatFilter})}"
                       th:text="${orderPage.totalPages}"
                       style="color: #fbaa1d;"
                       th:title="${'Page '+ orderPage.totalPages}">
                    </a>
                </li>

                <!-- Next button -->
                <li th:style="${currentPage == orderPage.totalPages} ? 'display:none'">
                    <a th:href="@{/user-details/{id}#order(id=${user.getUserId()},
                                                            size=${orderPage.size},
                                                            page=${currentPage + 1},
                                                            payOptFilter=${payOptFilter},
                                                            payStatFilter=${payStatFilter},
                                                            delStatFilter=${delStatFilter})}"
                       aria-label="Next" title="Next Page" rel="tooltip">
                        <i class="pagination_arrow fa fa-angle-right"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

</span>

<!-- No orders -->
<span th:unless="${orderPage.totalPages > 0}">
    <div class="warning-text">There are no orders.</div>
</span>

<script>

    var userId = /*[[${user.getUserId()}]]*/ 'default';

    $('.confirm').click(function (event) {
        var orderId = $(this).attr("id").split("-")[1];
        var ret = {
            reply: "confirm",
            orderId: orderId,
            confirmedProducts: JSON.stringify(getCheckedProducts("pending-order-" + orderId))
        };

        if (validation_check([])) {
            event.preventDefault();
            $.post("/user-details/order/" + userId, ret, function (data) {
                iziToast.show({
                    title: 'Success',
                    message: 'Order confirmed successfully.',
                    position: 'topRight',
                    color: 'green'
                });
                window.location.href = "/user-details#order";
                setTimeout(function () {
                    history.pushState(null, null, ' ');
                }, 100);

            }).fail(function (data) {
                iziToast.show({
                    title: 'Fail',
                    message: data.responseText,
                    position: 'topRight',
                    color: 'red'
                });
            })
        }
    });

    $('.cancel').click(function (event) {
        var ret = {
            reply: "cancel",
            orderId: $(this).attr("id").split("-")[1]
        };

        if (validation_check([])) {
            event.preventDefault();
            $.post("/user-details/order/" + userId, ret, function (data) {
                iziToast.show({
                    title: 'Success',
                    message: 'Order canceled successfully.',
                    position: 'topRight',
                    color: 'green'
                });
                window.location.href = "/user-details#order";
                setTimeout(function () {
                    history.pushState(null, null, ' ');
                }, 100);

            }).fail(function (data) {
                iziToast.show({
                    title: 'Fail',
                    message: data.responseText,
                    position: 'topRight',
                    color: 'red'
                });
            })
        }
    });

    function getCheckedProducts(checkboxName) {
        var arr = [];
        $.each($('input[name=' + checkboxName + ']:checked'), function () {
            var value = $(this).val();
            arr.push(value)
        });
        console.log(arr);
        return arr;
    }
</script>

</html>